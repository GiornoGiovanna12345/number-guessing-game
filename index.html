<!DOCTYPE html>
<html>
<head>
<title>Number Guessing Game</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://pyscript.net/releases/2026.2.1/core.css" />
    <script type="module" src="https://pyscript.net/releases/2026.2.1/core.js"></script>
</head>
<body>
    <div class="container">
    <h1>
        Guess That Number!
    </h1>
    Your objective is to guess the number. The range is: 0-100<br>
    You have 7 total attempts<br>
    <p>
    <form id="guessForm">
    <input id="guess" type="number" min="0" max="100" placeholder="Enter Guess">
    <button id="guessBtn" class="guessBtn" type="submit">Guess</button>
    </form>
    </p>
    
    <p id="result" class="result"></p>
    <p id="range_display" class="range"></p>
    <p id="attempts" class="attempts" >All The Best!! </p>
    <p><button id="restartBtn"  class="try_again" style="display:none;">&#x21bb;</button></p>
    </div>

    <py-script>
    import random
    from pyscript import document, when, window

    num = random.randint(0, 100)
    count = 7
    lower_range=0
    higher_range=100
    @when("click", "#guessBtn")
    def check_guess(event=None):
        global count,lower_range,higher_range
        if event:
            event.preventDefault() 

        guess = document.getElementById("guess").value
        result = document.getElementById("result")
        range_display = document.getElementById("range_display");
        restartBtn=document.getElementById("restartBtn")
        attempts_display=document.getElementById("attempts")
        result.classList.remove("shake")

        if not guess:
            result.innerText = "Enter a number!"
            result.classList.add("show")
            return

        guess = int(guess)
        count -= 1

        attempts_display.innerText=f"Attempts Left: {count}"
        if guess == num:
            result.innerText = f"CONGRATULATIONS!\n The correct answer was: {num}" 
            result.classList.add("correct")
            restartBtn.style.display="inline-block"
            guessBtn=document.getElementById("guessBtn")
            guess=document.getElementById("guess")
            guessBtn.disabled=True
            guess.disabled=True
            attempts_display.style.display = "none"

        elif guess < num:
            result.innerText = "Go Higher!"
            lower_range=guess
            result.classList.remove("shake")
            result.offsetWidth  
            result.classList.add("shake")
            range_display.innerText=f"Range: {lower_range}-{higher_range}"

        elif guess > num:
            result.innerText = "Go Lower!"
            higher_range=guess
            result.classList.remove("shake")
            result.offsetWidth  
            result.classList.add("shake")
            range_display.innerText=f"Range: {lower_range}-{higher_range}"

        if count==0:
            result.innerText = f"Uh Oh! GAME OVER!!\n The answer was: {num}"
            restartBtn.style.display="inline-block"
            guessBtn=document.getElementById("guessBtn")
            guess=document.getElementById("guess")
            guessBtn.disabled=True
            guess.disabled=True
            attempts_display.style.display = "none"
        guess_input = document.getElementById("guess")
        guess_input.value = ""
        guess_input.focus()


    @when("click","#restartBtn")    
    def restart_game(event):
        from pyscript import window
        window.location.reload()
    </py-script>
    
</body>
</html>